<!DOCTYPE html>
<html>
  <head>
    <title>JSON Chat</title>
  </head>
  <body>
    <h2>JSON Chat Example</h2>
    <div
      id="chat"
      style="
        border: 1px solid #ccc;
        height: 200px;
        overflow: auto;
        padding: 10px;
      "
    ></div>
    <input id="user" placeholder="Your name" />
    <input id="msg" placeholder="Type message" />
    <button id="send">Send</button>

    <script>
      const ws = new WebSocket("ws://localhost:3000");

      ws.onmessage = (event) => {
        const data = JSON.parse(event.data);
        const chat = document.getElementById("chat");
        const div = document.createElement("div");
        div.textContent = `[${data.time}] ${data.user}: ${data.message}`;
        chat.appendChild(div);
      };

      document.getElementById("send").onclick = () => {
        const user = document.getElementById("user").value || "Anonymous";
        const message = document.getElementById("msg").value;
        if (message.trim()) {
          ws.send(JSON.stringify({ user, message }));
          document.getElementById("msg").value = "";
        }
      };
    </script>
  </body>
</html>
